; Testes SBC
MOV #STACK R6 ; inicia pilha

; CASO SIMPLES
MOV #1 R0
CCC Z
SCC CNV
SBC R0
BNE ERR
BMI ERR
BVS ERR
BCC ERR ; Borrow nao acontece então C fica ligado
CMP R0 #0
BNE ERR
MOV R0 -(R6)

; BORROW E NEGATIVAÇÃO
MOV #0 R0
CCC N
SCC VZC
SBC R0
BPL ERR
BVS ERR
BEQ ERR
BCS ERR ; Borrow acontece então C é desligado
CMP R0 MAX
BNE ERR
MOV R0 -(R6)

; OVERFLOW
MOV MINN R0
CCC VC
SCC NZ
SBC R0
BEQ ERR
BCC ERR
BVC ERR
BMI ERR
CMP R0 MAXN
BNE ERR
MOV R0 -(R6)

; MODOS DE ENDERECAMENTO
;PRE DEC
MOV #T R0
SCC C
SBC -(R0)   ; escreve em T_PRE_DEC
;POS INC
SCC C
SBC #0   ; mesmo que INC (R7)+
;INDIRETO
MOV #T R0
SCC C
SBC (R0)    ; escreve em T
;INDEXADO
SCC C
SBC 2(R0)   ; escreve em T_IDX
;IND POS INC
MOV #TI_POS_INC R0
SCC C
SBC ((R0)+)
;IND PRE DEC
MOV #TI_IDX R0
SCC C
SBC (-(R0)) ; escreve em TI_PRE_DEC
;IND INDEXADO
SCC C
SBC 2(R0)   ; escreve em TI_IDX

JMP END
ERR:
MOV #1 E
END:
HLT

ORG 1024
E: 0
MAX: HFFFF
MAXN: H7FFF
MINN: H8000
T_PRE_DEC: 1
T: 2
T_IDX:3
TI_POS_INC: 5
TI_PRE_DEC:6
TI_IDX: 7
