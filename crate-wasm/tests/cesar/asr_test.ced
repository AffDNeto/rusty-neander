; Testes ASR
CLR R0
CCC ZNCV
MOV #STACK R6

; TESTA CARRY
INC R0
MOV #2 R1 
CCC C
ASR R1  ; 2>> = 1 COM C=0
BCs ERR
BEQ ERR
BMI ERR
MOV R1 -(R6)

ASR R1  ; 1>> = 0 COM C=1
BCC ERR
BNE ERR
BMI ERR
MOV R1 -(R6)

INC R0
ASR R1  ; 0>> + C=1 = 0
BPL ERR
BCS ERR
BEQ ERR
MOV R1 -(R6)

; TESTA OVERFLOW (XOR ENTRE CARRY E LSB)
INC R0
MOV #1 R1
SCC C
ASR R1  ; 1 XOR 1 = 0
BVS ERR
MOV R1 -(R6)

INC R0
CCC C
ASR R1  ; 0 XOR 0 = 0
BVS ERR
MOV R1 -(R6)

INC R0
MOV #1 R1
CCC C
ASR R1  ; 0 XOR 1 = 1
BVC ERR
MOV R1 -(R6)

; FULL CYCLE
INC R0
MOV #17 R2
MOV MAX R1
CCC C
LOOP:
ASR R1
MOV R1 -(R6)
SOB R2,LOOP


; MODOS DE ENDERECAMENTO
;PRE DEC
MOV #T R0
ASR -(R0)   ; escreve em T_PRE_DEC
;POS INC
ASR #0   ; mesmo que INC (R7)+
;INDIRETO
MOV #T R0
ASR (R0)    ; escreve em T
;INDEXADO
ASR 2(R0)   ; escreve em T_IDX
;IND POS INC
MOV #TI_POS_INC TMP
MOV #TMP R0
ASR ((R0)+)
;IND PRE DEC
MOV #TI_PRE_DEC TMP
ASR (-(R0)) ; escreve em TI_PRE_DEC
;IND INDEXADO
MOV #TI_IDX R0
INC R0
INC R0
ASR (-2(R0))   ; escreve em TI_IDX


JMP END
ERR:
MOV #1 E
END:
MOV R0 COUNTER
HLT

ORG 1024
STACK:5
E: 0
COUNTER: 0
FALSE: H0000
TRUE: HFFFF
A: HF0F0
NEG_A: H0F0F
T_PRE_DEC: 1
T: 2
T_IDX:3
TI_POS_INC: 5
TI_PRE_DEC:6
TI_IDX: 7
TMP: 8